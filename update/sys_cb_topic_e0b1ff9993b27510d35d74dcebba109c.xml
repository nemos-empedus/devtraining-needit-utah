<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic">
    <sys_cb_topic action="INSERT_OR_UPDATE">
        <applicability/>
        <applicability_mode>query</applicability_mode>
        <autopilot_topic>false</autopilot_topic>
        <category/>
        <channels/>
        <connect_queue/>
        <description>Auto Resolution Topic</description>
        <expose_on_palette>false</expose_on_palette>
        <flexible_conversation_switching>true</flexible_conversation_switching>
        <graph>{"graph_api_version":"1.0.42","variables":{"a67762d6ccc54c0ea43f963d4164d9ce":{"category":"vaInputs","id":"a67762d6ccc54c0ea43f963d4164d9ce","label":"User","name":"user","table":"sys_user","varType":"reference"},"8ce98d501f9e41609676197405b81aac":{"id":"8ce98d501f9e41609676197405b81aac","value":{"mode":"script","value":"(function execute() {\n})()\n"},"name":"is_valid","label":"is_valid","varType":"script","category":"vaVars"},"b241cc630a1f410288c4d452de4a1aa5":{"id":"b241cc630a1f410288c4d452de4a1aa5","value":{"mode":"simple","value":""},"name":"validation_reason","label":"validation_reason","varType":"script","category":"vaVars"},"ee2bec8a3af54139a72b8adb726cbe23":{"id":"ee2bec8a3af54139a72b8adb726cbe23","value":{"value":"","mode":"simple"},"name":"auto_resolution_context_id","label":"auto_resolution_context_id","varType":"script","category":"vaVars"},"ea43e6756e5543849adb7f9f9b60cb1f":{"id":"ea43e6756e5543849adb7f9f9b60cb1f","value":{"value":"","mode":"simple"},"name":"topic_id","label":"topic_id","varType":"script","category":"vaVars"},"787ce5f9ec3946698bad640c3d8e08df":{"id":"787ce5f9ec3946698bad640c3d8e08df","name":"close_task_input","label":"Close Task Input","varType":"choice","choices":[{"label":"No, close it","value":"close"},{"label":"Yes, keep it open","value":"open","checked":true}],"category":"vaInputs","nodeId":"885c55526aed45f7b2b2d1e46d04e690","isHidden":false},"ac9165907ee3403a8bc14516243cfcde":{"id":"ac9165907ee3403a8bc14516243cfcde","value":{"value":"","mode":"simple"},"name":"task_id","label":"task_id","varType":"script","category":"vaVars"},"49c453f92fd14ad8989840981a26d4d3":{"id":"49c453f92fd14ad8989840981a26d4d3","value":{"value":"","mode":"simple"},"name":"task_table","label":"task_table","varType":"script","category":"vaVars"},"ceb0d109aeff402aa14d12291bf0be74":{"id":"ceb0d109aeff402aa14d12291bf0be74","value":{"mode":"simple","value":"false"},"name":"is_notification_expired","label":"is_notification_expired","varType":"script","category":"vaVars"},"893a81ac1cfa457ba95c2fde0ef46ea6":{"id":"893a81ac1cfa457ba95c2fde0ef46ea6","value":{"value":"","mode":"simple"},"name":"action_sys_id","label":"action_sys_id","varType":"script","category":"vaVars"},"89baee99fa2f4abc928cb751be55b70c":{"id":"89baee99fa2f4abc928cb751be55b70c","value":{"mode":"simple","value":"true"},"name":"is_iar_wrapper_topic","label":"is_iar_wrapper_topic","varType":"script","category":"vaVars"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"","nodes":{"3892d75654eb441f84e24550070816a7":{"id":"3892d75654eb441f84e24550070816a7","stepType":"Start","name":"Start","greetingResponse":{"mode":"simple","value":""}},"9ef20a11f1e54d379e1378b1b5774cbf":{"id":"9ef20a11f1e54d379e1378b1b5774cbf","stepType":"TerminateGoal","name":"End","confirmationMessage":{"mode":"simple","value":""}},"8d85da4d58fd47e880bbe3cba887a26f":{"id":"8d85da4d58fd47e880bbe3cba887a26f","name":"Validation","script":"(function execute() {\n    \n    var notificationContext = JSON.parse(vaVars.global_notification_context);\n    vaVars.auto_resolution_context_id = notificationContext.tableSysId;\n    vaVars.action_sys_id = notificationContext.actionId;\n    interactionId = vaSystem.getInteractionSysId();\n\n    var contextHelper = new global.AutoResolutionContextHelper();\n    var context = contextHelper.getContextDetails(vaVars.auto_resolution_context_id);\n    contextHelper.setInteraction(vaVars.auto_resolution_context_id, interactionId);\n    new global.AutoResolutionTaskHelper().associateTaskToInteraction(context.taskTable, context.taskId, interactionId);\n    \n    vaVars.topic_id = context.topicId;\n    vaVars.task_id = context.taskId;\n    vaVars.task_table = context.taskTable;\n    vaVars.is_valid = context.isValid;\n    vaVars.validation_reason = context.validationReason;\n    vaVars.is_notification_expired = context.validationReason == 'Notification expired';\n\n    var logUtils = new global.AutoResolutionLoggingUtils()\n                        .withName('topic')\n                        .withContextId(vaVars.auto_resolution_context_id)\n                        .withTaskValues(vaVars.task_id, vaVars.task_table)\n                        .withLanguage(context.language)\n                        .withConfiguration(context.configId)\n                        .withTopic(vaVars.topic_id);\n    vaVars.loggingContext = JSON.stringify(logUtils.CONTEXT);\n    var logger = logUtils.createLogger();\n    logger.info('Starting Auto-Resoluton Topic');\n\n    if (!vaVars.is_notification_expired &amp;&amp; vaVars.is_valid) {\n        contextHelper.updateNotificationResponded(vaVars.auto_resolution_context_id, \"accepted\");\n        logger.debug('Marking context={0} as accpeted', vaVars.auto_resolution_context_id);\n    }\n    \n     //!!!!!IMPORTANT: DO NOT CHANGE THIS VALUE!!!!!\n    vaVars.is_iar_wrapper_topic = true;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"52d2ef05764b4d248463c04d14034f49":{"id":"52d2ef05764b4d248463c04d14034f49","stepType":"Decision","name":"Help Now?"},"9cfff2f124c84341ba60da18d7af7141":{"id":"9cfff2f124c84341ba60da18d7af7141","name":"Invoke Resolution Topic","script":"(function execute() {\n    var logger = new global.AutoResolutionLoggingUtils()\n                        .withName('topic')\n                        .withContext(vaVars.loggingContext)\n                        .createLogger();\n    logger.info('User accepted the Auto-Resolution topic. Swtiching to topic={0}', vaVars.topic_id);\n    vaSystem.switchTopicById(vaVars.topic_id);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"885c55526aed45f7b2b2d1e46d04e690":{"stepType":"ChoicePrompt","name":"Close Task Input","prompt":{"value":[{"type":"paragraph","children":[{"text":"If there's anything else you need related to this ticket, I can keep it open."}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"variableId":"787ce5f9ec3946698bad640c3d8e08df","id":"885c55526aed45f7b2b2d1e46d04e690","withNluUserInput":false,"skipIfFulfilled":false,"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"hasCardHeader":false},"ae36caee62bf4cce880aa032523215d2":{"id":"ae36caee62bf4cce880aa032523215d2","stepType":"Decision","name":"Close Task?"},"1b997e439ec54a99b279dffec211d0b4":{"id":"1b997e439ec54a99b279dffec211d0b4","name":"Unassign Task and keep task open","script":"(function execute() {\n    \n   var helper = new global.AutoResolutionContextHelper();\n   helper.executeTemplate(helper.UNRESOLVED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\n\n   var logger = new global.AutoResolutionLoggingUtils()\n                        .withName('topic')\n                        .withContext(vaVars.loggingContext)\n                        .createLogger();\n    logger.info('User decided to keep the task={0} open', vaVars.task_id);\n\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"7dbb5f530d3d469eaa5817ea661c26ac":{"id":"7dbb5f530d3d469eaa5817ea661c26ac","name":"Mark Task Resolved","script":"(function execute() {\n\n    var helper = new global.AutoResolutionContextHelper();\n    helper.executeTemplate(helper.RESOLVED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\n\n    var logger = new global.AutoResolutionLoggingUtils()\n                        .withName('topic')\n                        .withContext(vaVars.loggingContext)\n                        .createLogger();\n    logger.info('User decided to mark the task={0} as resolved', vaVars.task_id);\n    \n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"78e95ab6f4954ca1bf2994b78e5e6b07":{"id":"78e95ab6f4954ca1bf2994b78e5e6b07","stepType":"TextOutput","name":"Unable to Proceed","value":[{"value":"(function execute() {\n    var taskUpdated = vaVars.validation_reason.includes('has changed the task state');\n    var helper = new global.AutoResolutionContextHelper();\n    helper.executeTemplate(helper.ERROR, vaVars.auto_resolution_context_id, vaVars.loggingContext);\n\n    var logger = new global.AutoResolutionLoggingUtils()\n                        .withName('topic')\n                        .withContext(vaVars.loggingContext)\n                        .createLogger();\n    var message;\n\n    if (vaVars.is_notification_expired || taskUpdated)\n        message = gs.getMessage(\"It looks like another agent is already working on your incident. I won’t be able to help you at this time.\");\n    else\n        message = gs.getMessage(\"I’m currently unable to help with your request.\");\n\n    logger.info('Unable to proceed with Auo-resolution topic, reason={0}', message);\n    return message;\n\n})()\n","mode":"script"}],"applicability":{"value":"","mode":"query"},"secure":false},"eae43903fdda428c944a629132f55d59":{"id":"eae43903fdda428c944a629132f55d59","stepType":"TextOutput","name":"Let's Get Started","secure":false,"value":[{"value":[{"type":"paragraph","children":[{"text":"Great, if it turns out you need more help with it, we can leave the ticket open."}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"}},"7f48c92aec064e44bda51b8b9a2189bd":{"id":"7f48c92aec064e44bda51b8b9a2189bd","stepType":"TextOutput","name":"Unassigned Task Message","secure":false,"value":[{"value":[{"type":"paragraph","children":[{"text":""},{"text":"I unassigned myself from the ticket. An agent will reach out to help you with it."},{"text":""}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"}},"b2389fdd167c428796b6be73069e2cb4":{"id":"b2389fdd167c428796b6be73069e2cb4","name":"Apply topic completion template","script":"(function execute() {\n    var helper = new global.AutoResolutionContextHelper();\n    helper.executeTemplate(helper.TOPIC_COMPLETED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"ba1fb3a6781e4df3982141440a32cd4b":{"id":"ba1fb3a6781e4df3982141440a32cd4b","name":"Mark context declined","script":"(function execute() {\n\n    var contextHelper = new global.AutoResolutionContextHelper();\n    contextHelper.updateNotificationResponded(vaVars.auto_resolution_context_id, \"declined\");\n    contextHelper.executeTemplate(contextHelper.DECLINED, vaVars.auto_resolution_context_id, vaVars.loggingContext);\n\n    var logger = new global.AutoResolutionLoggingUtils()\n                        .withName('topic')\n                        .withContext(vaVars.loggingContext)\n                        .createLogger();\n    logger.info('User declined the Auto-Resolution topic');\n\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"94764c1cda2f471a9f0b1905351c54ec":{"id":"94764c1cda2f471a9f0b1905351c54ec","stepType":"TextOutput","name":"Close message","secure":false,"value":[{"value":[{"type":"paragraph","children":[{"text":"Awesome! I've closed it!  Check in with me next time you need help with things like this.  "},{"type":"emoji","emoji":{"id":"wave","name":"Waving Hand Sign","short_names":["wave"],"colons":":wave:","emoticons":[],"unified":"1f44b","skin":1,"native":""},"children":[{"text":""}]},{"text":""},{"type":"emoji","emoji":{"id":"wave","name":"Waving Hand Sign","short_names":["wave"],"colons":":wave:","emoticons":[],"unified":"1f44b","skin":1,"native":""},"children":[{"text":""}]},{"text":""},{"type":"emoji","emoji":{"id":"wave","name":"Waving Hand Sign","short_names":["wave"],"colons":":wave:","emoticons":[],"unified":"1f44b","skin":1,"native":""},"children":[{"text":""}]},{"text":""}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"}},"6d52d33c088a478eab994f871bd5635c":{"id":"6d52d33c088a478eab994f871bd5635c","stepType":"Component","name":"Track Deflection","fields":[],"reusableTopicId":"7fb4ca055303201033cdddeeff7b12b3","reusableTopicChoice":"Deflection Tracker","sourceType":"TOPIC_BLOCK","loading":false,"applicability":{"value":"","mode":"query"},"inputs":{"deflection_configuration":{"value":"93d2f7645383201033cdddeeff7b1208","mode":"simple","type":"Reference","table":"ssa_deflection_configuration"},"deflection_pattern":{"value":"d7d6f3285383201033cdddeeff7b12c0","mode":"string","type":"Reference","table":"ssa_deflection_pattern"},"activity_table":{"value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.task_table}}","displayValue":"Script Variables➛task_table"},"children":[{"text":""}]},{"text":""}]}],"mode":"string","type":"String"},"activity_ids":{"value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.task_id}}","displayValue":"Script Variables➛task_id"},"children":[{"text":""}]},{"text":""}]}],"mode":"string","type":"String"}},"outputs":[],"outdatedNote":false,"variableIds":[]}},"edges":[{"id":"afa7494f68c74a2187de30afd1d9d07d","edgeType":"Edge","source":"8d85da4d58fd47e880bbe3cba887a26f","target":"52d2ef05764b4d248463c04d14034f49","sourcePort":"","targetPort":""},{"id":"b9b526ff8bf04a01a3277f3b0ade2e03","edgeType":"Edge","source":"b2389fdd167c428796b6be73069e2cb4","target":"885c55526aed45f7b2b2d1e46d04e690","sourcePort":"","targetPort":""},{"id":"c69a38a75e69449dbafd14c196c26f7c","edgeType":"Edge","source":"7f48c92aec064e44bda51b8b9a2189bd","target":"9ef20a11f1e54d379e1378b1b5774cbf","sourcePort":"","targetPort":""},{"id":"4449bf2f4a98438286855619508828b0","edgeType":"Branch","source":"ae36caee62bf4cce880aa032523215d2","target":"7dbb5f530d3d469eaa5817ea661c26ac","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.close_task_input=close","mode":"query"},"label":"Yes"},{"id":"e201574e924c4ff3acabaf0a88b28937","edgeType":"Edge","source":"3892d75654eb441f84e24550070816a7","target":"8d85da4d58fd47e880bbe3cba887a26f","sourcePort":"","targetPort":""},{"id":"714005a432bb4b0c937f8db6fc8ef607","edgeType":"Edge","source":"885c55526aed45f7b2b2d1e46d04e690","target":"ae36caee62bf4cce880aa032523215d2","sourcePort":"","targetPort":""},{"id":"d107ad9d79ad4ca9b0123daadaf42fb0","edgeType":"Branch","source":"ae36caee62bf4cce880aa032523215d2","target":"1b997e439ec54a99b279dffec211d0b4","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.close_task_input=open","mode":"query"},"label":"No"},{"id":"5efbfd962c714d01bb8067f1b258a07b","edgeType":"Branch","source":"52d2ef05764b4d248463c04d14034f49","target":"78e95ab6f4954ca1bf2994b78e5e6b07","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaVars.is_valid;\n})()\n"},"label":"Error/Timeout"},{"id":"88f0be462e56442b9b815d34de4e53aa","edgeType":"Edge","source":"78e95ab6f4954ca1bf2994b78e5e6b07","target":"9ef20a11f1e54d379e1378b1b5774cbf","sourcePort":"","targetPort":""},{"id":"9c50a82a23574a3ea0479abf3cac6168","edgeType":"Branch","source":"52d2ef05764b4d248463c04d14034f49","target":"eae43903fdda428c944a629132f55d59","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var yesActions = ['19164c195377101055eeddeeff7b129d', '93373e4a53910110af71ddeeff7b12af'];\n    return vaVars.is_valid &amp;&amp; yesActions.indexOf(vaVars.action_sys_id) &gt;= 0;\n})()\n"},"label":"Yes"},{"id":"a382847382274c9c92c370d1fffded3e","edgeType":"Edge","source":"eae43903fdda428c944a629132f55d59","target":"9cfff2f124c84341ba60da18d7af7141","sourcePort":"","targetPort":""},{"id":"4bd066d0b1e945eeb3fbed6f9ea03675","edgeType":"Edge","source":"1b997e439ec54a99b279dffec211d0b4","target":"7f48c92aec064e44bda51b8b9a2189bd","sourcePort":"","targetPort":""},{"id":"cb2906ddb81f4922b647231f2201b461","edgeType":"Edge","source":"9cfff2f124c84341ba60da18d7af7141","target":"b2389fdd167c428796b6be73069e2cb4","sourcePort":"","targetPort":""},{"id":"50cf96f4e5dc4282929dd1903d45b64b","edgeType":"Branch","source":"52d2ef05764b4d248463c04d14034f49","target":"ba1fb3a6781e4df3982141440a32cd4b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var noActions = ['2a2f0c421b77101093b5ebda234bcb7f', '9a577e4a53910110af71ddeeff7b12c6']\n    return vaVars.is_valid &amp;&amp; noActions.indexOf(vaVars.action_sys_id) &gt;= 0;\n})()\n"},"label":"No"},{"id":"dc6868aa1b48476ab76f109b4c11a3cd","edgeType":"Edge","source":"ba1fb3a6781e4df3982141440a32cd4b","target":"7f48c92aec064e44bda51b8b9a2189bd","sourcePort":"","targetPort":""},{"id":"358a207b92df4161b34b8565322f0f09","edgeType":"Edge","source":"94764c1cda2f471a9f0b1905351c54ec","target":"9ef20a11f1e54d379e1378b1b5774cbf","sourcePort":"","targetPort":""},{"id":"20aa0467556242008f3badc725197ec4","edgeType":"Edge","source":"7dbb5f530d3d469eaa5817ea661c26ac","target":"6d52d33c088a478eab994f871bd5635c","sourcePort":"","targetPort":""},{"id":"6b58ac4a32dc48d6bdcd90d1b1ddf4de","edgeType":"Edge","source":"6d52d33c088a478eab994f871bd5635c","target":"94764c1cda2f471a9f0b1905351c54ec","sourcePort":"","targetPort":""}]}}}</graph>
        <key_phrases>Report IT Issue,Issue Auto-Resolution</key_phrases>
        <library>false</library>
        <live_agent>false</live_agent>
        <name>Report IT Issue</name>
        <nlu_intent/>
        <nlu_intent_label/>
        <nlu_model/>
        <nlu_model_label/>
        <nlu_provider/>
        <palette_label/>
        <roles/>
        <root_topic_id>d1cf2a4e5316101055eeddeeff7b12cc</root_topic_id>
        <secure_custom_input_control>false</secure_custom_input_control>
        <source_topic_id>d1cf2a4e5316101055eeddeeff7b12cc</source_topic_id>
        <sys_class_name>sys_cb_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-11-28 15:57:35</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>e0b1ff9993b27510d35d74dcebba109c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Report IT Issue</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_cb_topic_e0b1ff9993b27510d35d74dcebba109c</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-11-28 15:57:35</sys_updated_on>
        <triggerable_by_notification>false</triggerable_by_notification>
        <type>STANDARD</type>
    </sys_cb_topic>
</record_update>
